<div class="listing-table">
<%= link_to 'Add new product', new_category_path%>
<h2>List of Categories</h2>


<%= search_form_for @q do |f| %>
  <div class="field">
  </div>
<table class="table table-striped table-bordered">
  <tr>
    <th><%= sort_link(@q, :name, 'Name') %></th>
    <th><%= sort_link(@q, :products, 'No of products') %></th>
    <th colspan="2">Edit</th>
  </tr>
  <tr>
    <td><%= f.text_field :name_cont%></td>
  </tr>

  <div class="actions">
    <%= f.submit "search"%>
  </div>
<% end %>
 
  <% @categories.each do |category| %>
    <% no_of_products = category.products.present? ? category.products.count : 0 %>  
    <tr id = "category<%=category.id%>">
      <td><%= category.name %></td>
      <td><%= no_of_products%></td>
      <td><%= link_to 'Edit', edit_category_path(category) %></td>
      <td><%= link_to 'Delete', category_path(category),
              method: :delete,:remote => true,
              data: { confirm: 'Are you sure?' } %></td>
    </tr>
  <% end %>
  <div class="page_info">
    <%= page_entries_info @categories %>
  </div>
</table>
  <div class="digg_pagination"> 
    <%= will_paginate @categories, :container => false %>
  </div>
</div>